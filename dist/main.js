(()=>{"use strict";var t={};function e(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function n(t){return t instanceof e(t).Element||t instanceof Element}function r(t){return t instanceof e(t).HTMLElement||t instanceof HTMLElement}function i(t){return"undefined"!=typeof ShadowRoot&&(t instanceof e(t).ShadowRoot||t instanceof ShadowRoot)}t.m={},t.u=t=>"q-learning-worker.js",t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href;var o=Math.max,a=Math.min,s=Math.round;function u(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function c(){return!/^((?!chrome|android).)*safari/i.test(u())}function l(t,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var a=t.getBoundingClientRect(),u=1,l=1;i&&r(t)&&(u=t.offsetWidth>0&&s(a.width)/t.offsetWidth||1,l=t.offsetHeight>0&&s(a.height)/t.offsetHeight||1);var f=(n(t)?e(t):window).visualViewport,h=!c()&&o,p=(a.left+(h&&f?f.offsetLeft:0))/u,d=(a.top+(h&&f?f.offsetTop:0))/l,m=a.width/u,v=a.height/l;return{width:m,height:v,top:d,right:p+m,bottom:d+v,left:p,x:p,y:d}}function f(t){var n=e(t);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function h(t){return t?(t.nodeName||"").toLowerCase():null}function p(t){return((n(t)?t.ownerDocument:t.document)||window.document).documentElement}function d(t){return l(p(t)).left+f(t).scrollLeft}function m(t){return e(t).getComputedStyle(t)}function v(t){var e=m(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function g(t,n,i){void 0===i&&(i=!1);var o,a,u=r(n),c=r(n)&&function(t){var e=t.getBoundingClientRect(),n=s(e.width)/t.offsetWidth||1,r=s(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(n),m=p(n),g=l(t,c,i),y={scrollLeft:0,scrollTop:0},w={x:0,y:0};return(u||!u&&!i)&&(("body"!==h(n)||v(m))&&(y=(o=n)!==e(o)&&r(o)?{scrollLeft:(a=o).scrollLeft,scrollTop:a.scrollTop}:f(o)),r(n)?((w=l(n,!0)).x+=n.clientLeft,w.y+=n.clientTop):m&&(w.x=d(m))),{x:g.left+y.scrollLeft-w.x,y:g.top+y.scrollTop-w.y,width:g.width,height:g.height}}function y(t){var e=l(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function w(t){return"html"===h(t)?t:t.assignedSlot||t.parentNode||(i(t)?t.host:null)||p(t)}function b(t){return["html","body","#document"].indexOf(h(t))>=0?t.ownerDocument.body:r(t)&&v(t)?t:b(w(t))}function x(t,n){var r;void 0===n&&(n=[]);var i=b(t),o=i===(null==(r=t.ownerDocument)?void 0:r.body),a=e(i),s=o?[a].concat(a.visualViewport||[],v(i)?i:[]):i,u=n.concat(s);return o?u:u.concat(x(w(s)))}function _(t){return["table","td","th"].indexOf(h(t))>=0}function A(t){return r(t)&&"fixed"!==m(t).position?t.offsetParent:null}function M(t){for(var n=e(t),o=A(t);o&&_(o)&&"static"===m(o).position;)o=A(o);return o&&("html"===h(o)||"body"===h(o)&&"static"===m(o).position)?n:o||function(t){var e=/firefox/i.test(u());if(/Trident/i.test(u())&&r(t)&&"fixed"===m(t).position)return null;var n=w(t);for(i(n)&&(n=n.host);r(n)&&["html","body"].indexOf(h(n))<0;){var o=m(n);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||e&&"filter"===o.willChange||e&&o.filter&&"none"!==o.filter)return n;n=n.parentNode}return null}(t)||n}var k="top",E="bottom",O="right",N="left",S="auto",T=[k,E,O,N],L="start",P="end",D="clippingParents",j="viewport",q="popper",C="reference",R=T.reduce((function(t,e){return t.concat([e+"-"+L,e+"-"+P])}),[]),$=[].concat(T,[S]).reduce((function(t,e){return t.concat([e,e+"-"+L,e+"-"+P])}),[]),V=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function H(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}var I={placement:"bottom",modifiers:[],strategy:"absolute"};function B(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function W(t){void 0===t&&(t={});var e=t,r=e.defaultModifiers,i=void 0===r?[]:r,o=e.defaultOptions,a=void 0===o?I:o;return function(t,e,r){void 0===r&&(r=a);var o,s,u={placement:"bottom",orderedModifiers:[],options:Object.assign({},I,a),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},c=[],l=!1,f={state:u,setOptions:function(r){var o="function"==typeof r?r(u.options):r;h(),u.options=Object.assign({},a,u.options,o),u.scrollParents={reference:n(t)?x(t):t.contextElement?x(t.contextElement):[],popper:x(e)};var s,l,p=function(t){var e=H(t);return V.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((s=[].concat(i,u.options.modifiers),l=s.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(l).map((function(t){return l[t]}))));return u.orderedModifiers=p.filter((function(t){return t.enabled})),u.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,i=t.effect;if("function"==typeof i){var o=i({state:u,name:e,instance:f,options:r});c.push(o||function(){})}})),f.update()},forceUpdate:function(){if(!l){var t=u.elements,e=t.reference,n=t.popper;if(B(e,n)){u.rects={reference:g(e,M(n),"fixed"===u.options.strategy),popper:y(n)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach((function(t){return u.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<u.orderedModifiers.length;r++)if(!0!==u.reset){var i=u.orderedModifiers[r],o=i.fn,a=i.options,s=void 0===a?{}:a,c=i.name;"function"==typeof o&&(u=o({state:u,options:s,name:c,instance:f})||u)}else u.reset=!1,r=-1}}},update:(o=function(){return new Promise((function(t){f.forceUpdate(),t(u)}))},function(){return s||(s=new Promise((function(t){Promise.resolve().then((function(){s=void 0,t(o())}))}))),s}),destroy:function(){h(),l=!0}};if(!B(t,e))return f;function h(){c.forEach((function(t){return t()})),c=[]}return f.setOptions(r).then((function(t){!l&&r.onFirstUpdate&&r.onFirstUpdate(t)})),f}}var F={passive:!0};function X(t){return t.split("-")[0]}function U(t){return t.split("-")[1]}function z(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Y(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?X(i):null,a=i?U(i):null,s=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(o){case k:e={x:s,y:n.y-r.height};break;case E:e={x:s,y:n.y+n.height};break;case O:e={x:n.x+n.width,y:u};break;case N:e={x:n.x-r.width,y:u};break;default:e={x:n.x,y:n.y}}var c=o?z(o):null;if(null!=c){var l="y"===c?"height":"width";switch(a){case L:e[c]=e[c]-(n[l]/2-r[l]/2);break;case P:e[c]=e[c]+(n[l]/2-r[l]/2)}}return e}var Q={top:"auto",right:"auto",bottom:"auto",left:"auto"};function G(t){var n,r=t.popper,i=t.popperRect,o=t.placement,a=t.variation,u=t.offsets,c=t.position,l=t.gpuAcceleration,f=t.adaptive,h=t.roundOffsets,d=t.isFixed,v=u.x,g=void 0===v?0:v,y=u.y,w=void 0===y?0:y,b="function"==typeof h?h({x:g,y:w}):{x:g,y:w};g=b.x,w=b.y;var x=u.hasOwnProperty("x"),_=u.hasOwnProperty("y"),A=N,S=k,T=window;if(f){var L=M(r),D="clientHeight",j="clientWidth";L===e(r)&&"static"!==m(L=p(r)).position&&"absolute"===c&&(D="scrollHeight",j="scrollWidth"),(o===k||(o===N||o===O)&&a===P)&&(S=E,w-=(d&&L===T&&T.visualViewport?T.visualViewport.height:L[D])-i.height,w*=l?1:-1),o!==N&&(o!==k&&o!==E||a!==P)||(A=O,g-=(d&&L===T&&T.visualViewport?T.visualViewport.width:L[j])-i.width,g*=l?1:-1)}var q,C=Object.assign({position:c},f&&Q),R=!0===h?function(t){var e=t.x,n=t.y,r=window.devicePixelRatio||1;return{x:s(e*r)/r||0,y:s(n*r)/r||0}}({x:g,y:w}):{x:g,y:w};return g=R.x,w=R.y,l?Object.assign({},C,((q={})[S]=_?"0":"",q[A]=x?"0":"",q.transform=(T.devicePixelRatio||1)<=1?"translate("+g+"px, "+w+"px)":"translate3d("+g+"px, "+w+"px, 0)",q)):Object.assign({},C,((n={})[S]=_?w+"px":"",n[A]=x?g+"px":"",n.transform="",n))}const J={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];r(o)&&h(o)&&(Object.assign(o.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?o.removeAttribute(t):o.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],o=e.attributes[t]||{},a=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});r(i)&&h(i)&&(Object.assign(i.style,a),Object.keys(o).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};var K={left:"right",right:"left",bottom:"top",top:"bottom"};function Z(t){return t.replace(/left|right|bottom|top/g,(function(t){return K[t]}))}var tt={start:"end",end:"start"};function et(t){return t.replace(/start|end/g,(function(t){return tt[t]}))}function nt(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&i(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function rt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function it(t,r,i){return r===j?rt(function(t,n){var r=e(t),i=p(t),o=r.visualViewport,a=i.clientWidth,s=i.clientHeight,u=0,l=0;if(o){a=o.width,s=o.height;var f=c();(f||!f&&"fixed"===n)&&(u=o.offsetLeft,l=o.offsetTop)}return{width:a,height:s,x:u+d(t),y:l}}(t,i)):n(r)?function(t,e){var n=l(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(r,i):rt(function(t){var e,n=p(t),r=f(t),i=null==(e=t.ownerDocument)?void 0:e.body,a=o(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=o(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-r.scrollLeft+d(t),c=-r.scrollTop;return"rtl"===m(i||n).direction&&(u+=o(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:u,y:c}}(p(t)))}function ot(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function at(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function st(t,e){void 0===e&&(e={});var i=e,s=i.placement,u=void 0===s?t.placement:s,c=i.strategy,f=void 0===c?t.strategy:c,d=i.boundary,v=void 0===d?D:d,g=i.rootBoundary,y=void 0===g?j:g,b=i.elementContext,_=void 0===b?q:b,A=i.altBoundary,N=void 0!==A&&A,S=i.padding,L=void 0===S?0:S,P=ot("number"!=typeof L?L:at(L,T)),R=_===q?C:q,$=t.rects.popper,V=t.elements[N?R:_],H=function(t,e,i,s){var u="clippingParents"===e?function(t){var e=x(w(t)),i=["absolute","fixed"].indexOf(m(t).position)>=0&&r(t)?M(t):t;return n(i)?e.filter((function(t){return n(t)&&nt(t,i)&&"body"!==h(t)})):[]}(t):[].concat(e),c=[].concat(u,[i]),l=c[0],f=c.reduce((function(e,n){var r=it(t,n,s);return e.top=o(r.top,e.top),e.right=a(r.right,e.right),e.bottom=a(r.bottom,e.bottom),e.left=o(r.left,e.left),e}),it(t,l,s));return f.width=f.right-f.left,f.height=f.bottom-f.top,f.x=f.left,f.y=f.top,f}(n(V)?V:V.contextElement||p(t.elements.popper),v,y,f),I=l(t.elements.reference),B=Y({reference:I,element:$,strategy:"absolute",placement:u}),W=rt(Object.assign({},$,B)),F=_===q?W:I,X={top:H.top-F.top+P.top,bottom:F.bottom-H.bottom+P.bottom,left:H.left-F.left+P.left,right:F.right-H.right+P.right},U=t.modifiersData.offset;if(_===q&&U){var z=U[u];Object.keys(X).forEach((function(t){var e=[O,E].indexOf(t)>=0?1:-1,n=[k,E].indexOf(t)>=0?"y":"x";X[t]+=z[n]*e}))}return X}function ut(t,e,n){return o(t,a(e,n))}const ct={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=void 0===i||i,u=n.altAxis,c=void 0!==u&&u,l=n.boundary,f=n.rootBoundary,h=n.altBoundary,p=n.padding,d=n.tether,m=void 0===d||d,v=n.tetherOffset,g=void 0===v?0:v,w=st(e,{boundary:l,rootBoundary:f,padding:p,altBoundary:h}),b=X(e.placement),x=U(e.placement),_=!x,A=z(b),S=function(t){return"x"===t?"y":"x"}(A),T=e.modifiersData.popperOffsets,P=e.rects.reference,D=e.rects.popper,j="function"==typeof g?g(Object.assign({},e.rects,{placement:e.placement})):g,q="number"==typeof j?{mainAxis:j,altAxis:j}:Object.assign({mainAxis:0,altAxis:0},j),C=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(T){if(s){var $,V="y"===A?k:N,H="y"===A?E:O,I="y"===A?"height":"width",B=T[A],W=B+w[V],F=B-w[H],Y=m?-D[I]/2:0,Q=x===L?P[I]:D[I],G=x===L?-D[I]:-P[I],J=e.elements.arrow,K=m&&J?y(J):{width:0,height:0},Z=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},tt=Z[V],et=Z[H],nt=ut(0,P[I],K[I]),rt=_?P[I]/2-Y-nt-tt-q.mainAxis:Q-nt-tt-q.mainAxis,it=_?-P[I]/2+Y+nt+et+q.mainAxis:G+nt+et+q.mainAxis,ot=e.elements.arrow&&M(e.elements.arrow),at=ot?"y"===A?ot.clientTop||0:ot.clientLeft||0:0,ct=null!=($=null==C?void 0:C[A])?$:0,lt=B+it-ct,ft=ut(m?a(W,B+rt-ct-at):W,B,m?o(F,lt):F);T[A]=ft,R[A]=ft-B}if(c){var ht,pt="x"===A?k:N,dt="x"===A?E:O,mt=T[S],vt="y"===S?"height":"width",gt=mt+w[pt],yt=mt-w[dt],wt=-1!==[k,N].indexOf(b),bt=null!=(ht=null==C?void 0:C[S])?ht:0,xt=wt?gt:mt-P[vt]-D[vt]-bt+q.altAxis,_t=wt?mt+P[vt]+D[vt]-bt-q.altAxis:yt,At=m&&wt?function(t,e,n){var r=ut(t,e,n);return r>n?n:r}(xt,mt,_t):ut(m?xt:gt,mt,m?_t:yt);T[S]=At,R[S]=At-mt}e.modifiersData[r]=R}},requiresIfExists:["offset"]};const lt={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=X(n.placement),u=z(s),c=[N,O].indexOf(s)>=0?"height":"width";if(o&&a){var l=function(t,e){return ot("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:at(t,T))}(i.padding,n),f=y(o),h="y"===u?k:N,p="y"===u?E:O,d=n.rects.reference[c]+n.rects.reference[u]-a[u]-n.rects.popper[c],m=a[u]-n.rects.reference[u],v=M(o),g=v?"y"===u?v.clientHeight||0:v.clientWidth||0:0,w=d/2-m/2,b=l[h],x=g-f[c]-l[p],_=g/2-f[c]/2+w,A=ut(b,_,x),S=u;n.modifiersData[r]=((e={})[S]=A,e.centerOffset=A-_,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=e.elements.popper.querySelector(r)))&&nt(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ft(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function ht(t){return[k,O,E,N].some((function(e){return t[e]>=0}))}var pt=W({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var n=t.state,r=t.instance,i=t.options,o=i.scroll,a=void 0===o||o,s=i.resize,u=void 0===s||s,c=e(n.elements.popper),l=[].concat(n.scrollParents.reference,n.scrollParents.popper);return a&&l.forEach((function(t){t.addEventListener("scroll",r.update,F)})),u&&c.addEventListener("resize",r.update,F),function(){a&&l.forEach((function(t){t.removeEventListener("scroll",r.update,F)})),u&&c.removeEventListener("resize",r.update,F)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Y({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,u=void 0===s||s,c={placement:X(e.placement),variation:U(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,G(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:u})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,G(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},J,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,a=$.reduce((function(t,n){return t[n]=function(t,e,n){var r=X(t),i=[N,k].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[N,O].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,o),t}),{}),s=a[e.placement],u=s.x,c=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,u=n.fallbackPlacements,c=n.padding,l=n.boundary,f=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,d=void 0===p||p,m=n.allowedAutoPlacements,v=e.options.placement,g=X(v),y=u||(g!==v&&d?function(t){if(X(t)===S)return[];var e=Z(t);return[et(t),e,et(e)]}(v):[Z(v)]),w=[v].concat(y).reduce((function(t,n){return t.concat(X(n)===S?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,c=void 0===u?$:u,l=U(r),f=l?s?R:R.filter((function(t){return U(t)===l})):T,h=f.filter((function(t){return c.indexOf(t)>=0}));0===h.length&&(h=f);var p=h.reduce((function(e,n){return e[n]=st(t,{placement:n,boundary:i,rootBoundary:o,padding:a})[X(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:l,rootBoundary:f,padding:c,flipVariations:d,allowedAutoPlacements:m}):n)}),[]),b=e.rects.reference,x=e.rects.popper,_=new Map,A=!0,M=w[0],P=0;P<w.length;P++){var D=w[P],j=X(D),q=U(D)===L,C=[k,E].indexOf(j)>=0,V=C?"width":"height",H=st(e,{placement:D,boundary:l,rootBoundary:f,altBoundary:h,padding:c}),I=C?q?O:N:q?E:k;b[V]>x[V]&&(I=Z(I));var B=Z(I),W=[];if(o&&W.push(H[j]<=0),s&&W.push(H[I]<=0,H[B]<=0),W.every((function(t){return t}))){M=D,A=!1;break}_.set(D,W)}if(A)for(var F=function(t){var e=w.find((function(e){var n=_.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return M=e,"break"},z=d?3:1;z>0&&"break"!==F(z);z--);e.placement!==M&&(e.modifiersData[r]._skip=!0,e.placement=M,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},ct,lt,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=st(e,{elementContext:"reference"}),s=st(e,{altBoundary:!0}),u=ft(a,r),c=ft(s,i,o),l=ht(u),f=ht(c);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":f})}}]}),dt="tippy-box",mt="tippy-content",vt="tippy-backdrop",gt="tippy-arrow",yt="tippy-svg-arrow",wt={passive:!0,capture:!0},bt=function(){return document.body};function xt(t,e,n){if(Array.isArray(t)){var r=t[e];return null==r?Array.isArray(n)?n[e]:n:r}return t}function _t(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function At(t,e){return"function"==typeof t?t.apply(void 0,e):t}function Mt(t,e){return 0===e?t:function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)};var n}function kt(t){return[].concat(t)}function Et(t,e){-1===t.indexOf(e)&&t.push(e)}function Ot(t){return[].slice.call(t)}function Nt(t){return Object.keys(t).reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})}function St(){return document.createElement("div")}function Tt(t){return["Element","Fragment"].some((function(e){return _t(t,e)}))}function Lt(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function Pt(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function Dt(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[r](e,n)}))}function jt(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var qt={isTouch:!1},Ct=0;function Rt(){qt.isTouch||(qt.isTouch=!0,window.performance&&document.addEventListener("mousemove",$t))}function $t(){var t=performance.now();t-Ct<20&&(qt.isTouch=!1,document.removeEventListener("mousemove",$t)),Ct=t}function Vt(){var t=document.activeElement;if(function(t){return!(!t||!t._tippy||t._tippy.reference!==t)}(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}var Ht=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),It=Object.assign({appendTo:bt,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Bt=Object.keys(It);function Wt(t){var e=(t.plugins||[]).reduce((function(e,n){var r,i=n.name,o=n.defaultValue;return i&&(e[i]=void 0!==t[i]?t[i]:null!=(r=It[i])?r:o),e}),{});return Object.assign({},t,e)}function Ft(t,e){var n=Object.assign({},e,{content:At(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(Wt(Object.assign({},It,{plugins:e}))):Bt).reduce((function(e,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return e;if("content"===n)e[n]=r;else try{e[n]=JSON.parse(r)}catch(t){e[n]=r}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},It.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}var Xt=function(){return"innerHTML"};function Ut(t,e){t[Xt()]=e}function zt(t){var e=St();return!0===t?e.className=gt:(e.className=yt,Tt(t)?e.appendChild(t):Ut(e,t)),e}function Yt(t,e){Tt(e.content)?(Ut(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?Ut(t,e.content):t.textContent=e.content)}function Qt(t){var e=t.firstElementChild,n=Ot(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(mt)})),arrow:n.find((function(t){return t.classList.contains(gt)||t.classList.contains(yt)})),backdrop:n.find((function(t){return t.classList.contains(vt)}))}}function Gt(t){var e=St(),n=St();n.className=dt,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=St();function i(n,r){var i=Qt(e),o=i.box,a=i.content,s=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"==typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||Yt(a,t.props),r.arrow?s?n.arrow!==r.arrow&&(o.removeChild(s),o.appendChild(zt(r.arrow))):o.appendChild(zt(r.arrow)):s&&o.removeChild(s)}return r.className=mt,r.setAttribute("data-state","hidden"),Yt(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props),{popper:e,onUpdate:i}}Gt.$$tippy=!0;var Jt=1,Kt=[],Zt=[];function te(t,e){var n,r,i,o,a,s,u,c,l=Ft(t,Object.assign({},It,Wt(Nt(e)))),f=!1,h=!1,p=!1,d=!1,m=[],v=Mt(z,l.interactiveDebounce),g=Jt++,y=(c=l.plugins).filter((function(t,e){return c.indexOf(t)===e})),w={id:g,reference:t,popper:St(),popperInstance:null,props:l,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)},setProps:function(e){if(!w.state.isDestroyed){D("onBeforeUpdate",[w,e]),X();var n=w.props,r=Ft(t,Object.assign({},n,Nt(e),{ignoreAttributes:!0}));w.props=r,F(),n.interactiveDebounce!==r.interactiveDebounce&&(C(),v=Mt(z,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?kt(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):r.triggerTarget&&t.removeAttribute("aria-expanded"),q(),P(),_&&_(n,r),w.popperInstance&&(J(),Z().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)}))),D("onAfterUpdate",[w,e])}},setContent:function(t){w.setProps({content:t})},show:function(){var t=w.state.isVisible,e=w.state.isDestroyed,n=!w.state.isEnabled,r=qt.isTouch&&!w.props.touch,i=xt(w.props.duration,0,It.duration);if(!(t||e||n||r||N().hasAttribute("disabled")||(D("onShow",[w],!1),!1===w.props.onShow(w)))){if(w.state.isVisible=!0,O()&&(x.style.visibility="visible"),P(),H(),w.state.isMounted||(x.style.transition="none"),O()){var o=T();Lt([o.box,o.content],0)}var a,u,c;s=function(){var t;if(w.state.isVisible&&!d){if(d=!0,x.offsetHeight,x.style.transition=w.props.moveTransition,O()&&w.props.animation){var e=T(),n=e.box,r=e.content;Lt([n,r],i),Pt([n,r],"visible")}j(),q(),Et(Zt,w),null==(t=w.popperInstance)||t.forceUpdate(),D("onMount",[w]),w.props.animation&&O()&&function(t,e){B(t,(function(){w.state.isShown=!0,D("onShown",[w])}))}(i)}},u=w.props.appendTo,c=N(),(a=w.props.interactive&&u===bt||"parent"===u?c.parentNode:At(u,[c])).contains(x)||a.appendChild(x),w.state.isMounted=!0,J()}},hide:function(){var t=!w.state.isVisible,e=w.state.isDestroyed,n=!w.state.isEnabled,r=xt(w.props.duration,1,It.duration);if(!(t||e||n)&&(D("onHide",[w],!1),!1!==w.props.onHide(w))){if(w.state.isVisible=!1,w.state.isShown=!1,d=!1,f=!1,O()&&(x.style.visibility="hidden"),C(),I(),P(!0),O()){var i=T(),o=i.box,a=i.content;w.props.animation&&(Lt([o,a],r),Pt([o,a],"hidden"))}j(),q(),w.props.animation?O()&&function(t,e){B(t,(function(){!w.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&e()}))}(r,w.unmount):w.unmount()}},hideWithInteractivity:function(t){S().addEventListener("mousemove",v),Et(Kt,v),v(t)},enable:function(){w.state.isEnabled=!0},disable:function(){w.hide(),w.state.isEnabled=!1},unmount:function(){w.state.isVisible&&w.hide(),w.state.isMounted&&(K(),Z().forEach((function(t){t._tippy.unmount()})),x.parentNode&&x.parentNode.removeChild(x),Zt=Zt.filter((function(t){return t!==w})),w.state.isMounted=!1,D("onHidden",[w]))},destroy:function(){w.state.isDestroyed||(w.clearDelayTimeouts(),w.unmount(),X(),delete t._tippy,w.state.isDestroyed=!0,D("onDestroy",[w]))}};if(!l.render)return w;var b=l.render(w),x=b.popper,_=b.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+w.id,w.popper=x,t._tippy=w,x._tippy=w;var A=y.map((function(t){return t.fn(w)})),M=t.hasAttribute("aria-expanded");return F(),q(),P(),D("onCreate",[w]),l.showOnCreate&&tt(),x.addEventListener("mouseenter",(function(){w.props.interactive&&w.state.isVisible&&w.clearDelayTimeouts()})),x.addEventListener("mouseleave",(function(){w.props.interactive&&w.props.trigger.indexOf("mouseenter")>=0&&S().addEventListener("mousemove",v)})),w;function k(){var t=w.props.touch;return Array.isArray(t)?t:[t,0]}function E(){return"hold"===k()[0]}function O(){var t;return!(null==(t=w.props.render)||!t.$$tippy)}function N(){return u||t}function S(){var t,e,n=N().parentNode;return n?null!=(e=kt(n)[0])&&null!=(t=e.ownerDocument)&&t.body?e.ownerDocument:document:document}function T(){return Qt(x)}function L(t){return w.state.isMounted&&!w.state.isVisible||qt.isTouch||o&&"focus"===o.type?0:xt(w.props.delay,t?0:1,It.delay)}function P(t){void 0===t&&(t=!1),x.style.pointerEvents=w.props.interactive&&!t?"":"none",x.style.zIndex=""+w.props.zIndex}function D(t,e,n){var r;void 0===n&&(n=!0),A.forEach((function(n){n[t]&&n[t].apply(n,e)})),n&&(r=w.props)[t].apply(r,e)}function j(){var e=w.props.aria;if(e.content){var n="aria-"+e.content,r=x.id;kt(w.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(n);if(w.state.isVisible)t.setAttribute(n,e?e+" "+r:r);else{var i=e&&e.replace(r,"").trim();i?t.setAttribute(n,i):t.removeAttribute(n)}}))}}function q(){!M&&w.props.aria.expanded&&kt(w.props.triggerTarget||t).forEach((function(t){w.props.interactive?t.setAttribute("aria-expanded",w.state.isVisible&&t===N()?"true":"false"):t.removeAttribute("aria-expanded")}))}function C(){S().removeEventListener("mousemove",v),Kt=Kt.filter((function(t){return t!==v}))}function R(e){if(!qt.isTouch||!p&&"mousedown"!==e.type){var n=e.composedPath&&e.composedPath()[0]||e.target;if(!w.props.interactive||!jt(x,n)){if(kt(w.props.triggerTarget||t).some((function(t){return jt(t,n)}))){if(qt.isTouch)return;if(w.state.isVisible&&w.props.trigger.indexOf("click")>=0)return}else D("onClickOutside",[w,e]);!0===w.props.hideOnClick&&(w.clearDelayTimeouts(),w.hide(),h=!0,setTimeout((function(){h=!1})),w.state.isMounted||I())}}}function $(){p=!0}function V(){p=!1}function H(){var t=S();t.addEventListener("mousedown",R,!0),t.addEventListener("touchend",R,wt),t.addEventListener("touchstart",V,wt),t.addEventListener("touchmove",$,wt)}function I(){var t=S();t.removeEventListener("mousedown",R,!0),t.removeEventListener("touchend",R,wt),t.removeEventListener("touchstart",V,wt),t.removeEventListener("touchmove",$,wt)}function B(t,e){var n=T().box;function r(t){t.target===n&&(Dt(n,"remove",r),e())}if(0===t)return e();Dt(n,"remove",a),Dt(n,"add",r),a=r}function W(e,n,r){void 0===r&&(r=!1),kt(w.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,n,r),m.push({node:t,eventType:e,handler:n,options:r})}))}function F(){E()&&(W("touchstart",U,{passive:!0}),W("touchend",Y,{passive:!0})),function(t){return t.split(/\s+/).filter(Boolean)}(w.props.trigger).forEach((function(t){if("manual"!==t)switch(W(t,U),t){case"mouseenter":W("mouseleave",Y);break;case"focus":W(Ht?"focusout":"blur",Q);break;case"focusin":W("focusout",Q)}}))}function X(){m.forEach((function(t){var e=t.node,n=t.eventType,r=t.handler,i=t.options;e.removeEventListener(n,r,i)})),m=[]}function U(t){var e,n=!1;if(w.state.isEnabled&&!G(t)&&!h){var r="focus"===(null==(e=o)?void 0:e.type);o=t,u=t.currentTarget,q(),!w.state.isVisible&&function(t){return _t(t,"MouseEvent")}(t)&&Kt.forEach((function(e){return e(t)})),"click"===t.type&&(w.props.trigger.indexOf("mouseenter")<0||f)&&!1!==w.props.hideOnClick&&w.state.isVisible?n=!0:tt(t),"click"===t.type&&(f=!n),n&&!r&&et(t)}}function z(t){var e=t.target,n=N().contains(e)||x.contains(e);if("mousemove"!==t.type||!n){var r=Z().concat(x).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:l}:null})).filter(Boolean);(function(t,e){var n=e.clientX,r=e.clientY;return t.every((function(t){var e=t.popperRect,i=t.popperState,o=t.props.interactiveBorder,a=i.placement.split("-")[0],s=i.modifiersData.offset;if(!s)return!0;var u="bottom"===a?s.top.y:0,c="top"===a?s.bottom.y:0,l="right"===a?s.left.x:0,f="left"===a?s.right.x:0,h=e.top-r+u>o,p=r-e.bottom-c>o,d=e.left-n+l>o,m=n-e.right-f>o;return h||p||d||m}))})(r,t)&&(C(),et(t))}}function Y(t){G(t)||w.props.trigger.indexOf("click")>=0&&f||(w.props.interactive?w.hideWithInteractivity(t):et(t))}function Q(t){w.props.trigger.indexOf("focusin")<0&&t.target!==N()||w.props.interactive&&t.relatedTarget&&x.contains(t.relatedTarget)||et(t)}function G(t){return!!qt.isTouch&&E()!==t.type.indexOf("touch")>=0}function J(){K();var e=w.props,n=e.popperOptions,r=e.placement,i=e.offset,o=e.getReferenceClientRect,a=e.moveTransition,u=O()?Qt(x).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||N()}:t,l=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(O()){var n=T().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}}];O()&&u&&l.push({name:"arrow",options:{element:u,padding:3}}),l.push.apply(l,(null==n?void 0:n.modifiers)||[]),w.popperInstance=pt(c,x,Object.assign({},n,{placement:r,onFirstUpdate:s,modifiers:l}))}function K(){w.popperInstance&&(w.popperInstance.destroy(),w.popperInstance=null)}function Z(){return Ot(x.querySelectorAll("[data-tippy-root]"))}function tt(t){w.clearDelayTimeouts(),t&&D("onTrigger",[w,t]),H();var e=L(!0),r=k(),i=r[0],o=r[1];qt.isTouch&&"hold"===i&&o&&(e=o),e?n=setTimeout((function(){w.show()}),e):w.show()}function et(t){if(w.clearDelayTimeouts(),D("onUntrigger",[w,t]),w.state.isVisible){if(!(w.props.trigger.indexOf("mouseenter")>=0&&w.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&f)){var e=L(!1);e?r=setTimeout((function(){w.state.isVisible&&w.hide()}),e):i=requestAnimationFrame((function(){w.hide()}))}}else I()}}function ee(t,e){void 0===e&&(e={});var n=It.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",Rt,wt),window.addEventListener("blur",Vt);var r=Object.assign({},e,{plugins:n}),i=function(t){return Tt(t)?[t]:function(t){return _t(t,"NodeList")}(t)?Ot(t):Array.isArray(t)?t:Ot(document.querySelectorAll(t))}(t).reduce((function(t,e){var n=e&&te(e,r);return n&&t.push(n),t}),[]);return Tt(t)?i[0]:i}ee.defaultProps=It,ee.setDefaultProps=function(t){Object.keys(t).forEach((function(e){It[e]=t[e]}))},ee.currentInput=qt,Object.assign({},J,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}}),ee.setDefaultProps({render:Gt});const ne=ee,re=class{constructor(t,e,n={x:0,y:0},r){this.domNode=document.querySelector(t),this.position=n,this.loopingPoint=e,this.speed=r}update(t){this.loopingPoint?this.position.x=Math.round((this.position.x+-t*this.speed)%this.loopingPoint):this.position.x=Math.round(this.position.x+-t*this.speed)}setPosition(t){const{x:e,y:n}=t;this.position.x=e,this.position.y=n}render(){this.domNode.style.left=this.position.x,this.domNode.style.top=this.position.y}},ie=1/30;function oe(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function ae(t){return t}var se=1,ue=2,ce=3,le=4,fe=1e-6;function he(t){return"translate("+t+",0)"}function pe(t){return"translate(0,"+t+")"}function de(t){return e=>+t(e)}function me(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ve(){return!this.__axis}function ge(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=t===se||t===le?-1:1,l=t===le||t===ue?"x":"y",f=t===se||t===ce?he:pe;function h(h){var p=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,d=null==i?e.tickFormat?e.tickFormat.apply(e,n):ae:i,m=Math.max(o,0)+s,v=e.range(),g=+v[0]+u,y=+v[v.length-1]+u,w=(e.bandwidth?me:de)(e.copy(),u),b=h.selection?h.selection():h,x=b.selectAll(".domain").data([null]),_=b.selectAll(".tick").data(p,e).order(),A=_.exit(),M=_.enter().append("g").attr("class","tick"),k=_.select("line"),E=_.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(M),k=k.merge(M.append("line").attr("stroke","currentColor").attr(l+"2",c*o)),E=E.merge(M.append("text").attr("fill","currentColor").attr(l,c*m).attr("dy",t===se?"0em":t===ce?"0.71em":"0.32em")),h!==b&&(x=x.transition(h),_=_.transition(h),k=k.transition(h),E=E.transition(h),A=A.transition(h).attr("opacity",fe).attr("transform",(function(t){return isFinite(t=w(t))?f(t+u):this.getAttribute("transform")})),M.attr("opacity",fe).attr("transform",(function(t){var e=this.parentNode.__axis;return f((e&&isFinite(e=e(t))?e:w(t))+u)}))),A.remove(),x.attr("d",t===le||t===ue?a?"M"+c*a+","+g+"H"+u+"V"+y+"H"+c*a:"M"+u+","+g+"V"+y:a?"M"+g+","+c*a+"V"+u+"H"+y+"V"+c*a:"M"+g+","+u+"H"+y),_.attr("opacity",1).attr("transform",(function(t){return f(w(t)+u)})),k.attr(l+"2",c*o),E.attr(l,c*m).text(d),b.filter(ve).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ue?"start":t===le?"end":"middle"),b.each((function(){this.__axis=w}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h.offset=function(t){return arguments.length?(u=+t,h):u},h}function ye(){}function we(t){return null==t?ye:function(){return this.querySelector(t)}}function be(){return[]}function xe(t){return null==t?be:function(){return this.querySelectorAll(t)}}function _e(t){return function(){return this.matches(t)}}function Ae(t){return function(e){return e.matches(t)}}var Me=Array.prototype.find;function ke(){return this.firstElementChild}var Ee=Array.prototype.filter;function Oe(){return Array.from(this.children)}function Ne(t){return new Array(t.length)}function Se(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Te(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new Se(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function Le(t,e,n,r,i,o,a){var s,u,c,l=new Map,f=e.length,h=o.length,p=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(p[s]=c=a.call(u,u.__data__,s,e)+"",l.has(c)?i[s]=u:l.set(c,u));for(s=0;s<h;++s)c=a.call(t,o[s],s,o)+"",(u=l.get(c))?(r[s]=u,u.__data__=o[s],l.delete(c)):n[s]=new Se(t,o[s]);for(s=0;s<f;++s)(u=e[s])&&l.get(p[s])===u&&(i[s]=u)}function Pe(t){return t.__data__}function De(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function je(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Se.prototype={constructor:Se,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var qe="http://www.w3.org/1999/xhtml";const Ce={svg:"http://www.w3.org/2000/svg",xhtml:qe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Re(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Ce.hasOwnProperty(e)?{space:Ce[e],local:t}:t}function $e(t){return function(){this.removeAttribute(t)}}function Ve(t){return function(){this.removeAttributeNS(t.space,t.local)}}function He(t,e){return function(){this.setAttribute(t,e)}}function Ie(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Be(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function We(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Fe(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Xe(t){return function(){this.style.removeProperty(t)}}function Ue(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ze(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ye(t,e){return t.style.getPropertyValue(e)||Fe(t).getComputedStyle(t,null).getPropertyValue(e)}function Qe(t){return function(){delete this[t]}}function Ge(t,e){return function(){this[t]=e}}function Je(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ke(t){return t.trim().split(/^|\s+/)}function Ze(t){return t.classList||new tn(t)}function tn(t){this._node=t,this._names=Ke(t.getAttribute("class")||"")}function en(t,e){for(var n=Ze(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function nn(t,e){for(var n=Ze(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function rn(t){return function(){en(this,t)}}function on(t){return function(){nn(this,t)}}function an(t,e){return function(){(e.apply(this,arguments)?en:nn)(this,t)}}function sn(){this.textContent=""}function un(t){return function(){this.textContent=t}}function cn(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ln(){this.innerHTML=""}function fn(t){return function(){this.innerHTML=t}}function hn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function pn(){this.nextSibling&&this.parentNode.appendChild(this)}function dn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mn(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===qe&&e.documentElement.namespaceURI===qe?e.createElement(t):e.createElementNS(n,t)}}function vn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function gn(t){var e=Re(t);return(e.local?vn:mn)(e)}function yn(){return null}function wn(){var t=this.parentNode;t&&t.removeChild(this)}function bn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _n(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function An(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Mn(t,e,n){var r=Fe(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function kn(t,e){return function(){return Mn(this,t,e)}}function En(t,e){return function(){return Mn(this,t,e.apply(this,arguments))}}tn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var On=[null];function Nn(t,e){this._groups=t,this._parents=e}function Sn(){return new Nn([[document.documentElement]],On)}Nn.prototype=Sn.prototype={constructor:Nn,select:function(t){"function"!=typeof t&&(t=we(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new Nn(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}(t):xe(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new Nn(r,i)},selectChild:function(t){return this.select(null==t?ke:function(t){return function(){return Me.call(this.children,t)}}("function"==typeof t?t:Ae(t)))},selectChildren:function(t){return this.selectAll(null==t?Oe:function(t){return function(){return Ee.call(this.children,t)}}("function"==typeof t?t:Ae(t)))},filter:function(t){"function"!=typeof t&&(t=_e(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Nn(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Pe);var n,r=e?Le:Te,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),u=new Array(a),c=new Array(a),l=0;l<a;++l){var f=i[l],h=o[l],p=h.length,d=De(t.call(f,f&&f.__data__,l,i)),m=d.length,v=u[l]=new Array(m),g=s[l]=new Array(m);r(f,h,v,g,c[l]=new Array(p),d,e);for(var y,w,b=0,x=0;b<m;++b)if(y=v[b]){for(b>=x&&(x=b+1);!(w=g[x])&&++x<m;);y._next=w||null}}return(s=new Nn(s,i))._enter=u,s._exit=c,s},enter:function(){return new Nn(this._enter||this._groups.map(Ne),this._parents)},exit:function(){return new Nn(this._exit||this._groups.map(Ne),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var c,l=n[u],f=r[u],h=l.length,p=s[u]=new Array(h),d=0;d<h;++d)(c=l[d]||f[d])&&(p[d]=c);for(;u<i;++u)s[u]=n[u];return new Nn(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=je);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new Nn(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=Re(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Ve:$e:"function"==typeof e?n.local?We:Be:n.local?Ie:He)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Xe:"function"==typeof e?ze:Ue)(t,e,null==n?"":n)):Ye(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Qe:"function"==typeof e?Je:Ge)(t,e)):this.node()[t]},classed:function(t,e){var n=Ke(t+"");if(arguments.length<2){for(var r=Ze(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?an:e?rn:on)(n,e))},text:function(t){return arguments.length?this.each(null==t?sn:("function"==typeof t?cn:un)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ln:("function"==typeof t?hn:fn)(t)):this.node().innerHTML},raise:function(){return this.each(pn)},lower:function(){return this.each(dn)},append:function(t){var e="function"==typeof t?t:gn(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:gn(t),r=null==e?yn:"function"==typeof e?e:we(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(wn)},clone:function(t){return this.select(t?xn:bn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?An:_n,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?En:kn)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const Tn=Sn;var Ln={value:()=>{}};function Pn(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Dn(r)}function Dn(t){this._=t}function jn(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function qn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ln,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Dn.prototype=Pn.prototype={constructor:Dn,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=qn(i[n],t.name,e);else if(null==e)for(n in i)i[n]=qn(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=jn(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Dn(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const Cn=Pn;var Rn,$n,Vn=0,Hn=0,In=0,Bn=1e3,Wn=0,Fn=0,Xn=0,Un="object"==typeof performance&&performance.now?performance:Date,zn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yn(){return Fn||(zn(Qn),Fn=Un.now()+Xn)}function Qn(){Fn=0}function Gn(){this._call=this._time=this._next=null}function Jn(t,e,n){var r=new Gn;return r.restart(t,e,n),r}function Kn(){Fn=(Wn=Un.now())+Xn,Vn=Hn=0;try{!function(){Yn(),++Vn;for(var t,e=Rn;e;)(t=Fn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Vn}()}finally{Vn=0,function(){for(var t,e,n=Rn,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Rn=e);$n=t,tr(r)}(),Fn=0}}function Zn(){var t=Un.now(),e=t-Wn;e>Bn&&(Xn-=e,Wn=t)}function tr(t){Vn||(Hn&&(Hn=clearTimeout(Hn)),t-Fn>24?(t<1/0&&(Hn=setTimeout(Kn,t-Un.now()-Xn)),In&&(In=clearInterval(In))):(In||(Wn=Un.now(),In=setInterval(Zn,Bn)),Vn=1,zn(Kn)))}function er(t,e,n){var r=new Gn;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Gn.prototype=Jn.prototype={constructor:Gn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Yn():+n)+(null==e?0:+e),this._next||$n===this||($n?$n._next=this:Rn=this,$n=this),this._call=t,this._time=n,tr()},stop:function(){this._call&&(this._call=null,this._time=1/0,tr())}};var nr=Cn("start","end","cancel","interrupt"),rr=[],ir=0,or=1,ar=2,sr=3,ur=4,cr=5,lr=6;function fr(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,l,f,h;if(n.state!==or)return s();for(c in i)if((h=i[c]).name===n.name){if(h.state===sr)return er(o);h.state===ur?(h.state=lr,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[c]):+c<e&&(h.state=lr,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[c])}if(er((function(){n.state===sr&&(n.state=ur,n.timer.restart(a,n.delay,n.time),a(u))})),n.state=ar,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ar){for(n.state=sr,r=new Array(f=n.tween.length),c=0,l=-1;c<f;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=cr,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);n.state===cr&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=lr,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Jn((function(t){n.state=or,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:nr,tween:rr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ir})}function hr(t,e){var n=dr(t,e);if(n.state>ir)throw new Error("too late; already scheduled");return n}function pr(t,e){var n=dr(t,e);if(n.state>sr)throw new Error("too late; already running");return n}function dr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function mr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var vr,gr=180/Math.PI,yr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wr(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*gr,skewX:Math.atan(u)*gr,scaleX:a,scaleY:s}}function br(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:mr(t,i)},{i:u-2,x:mr(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:mr(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:mr(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:mr(t,n)},{i:s-2,x:mr(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var xr=br((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?yr:wr(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),_r=br((function(t){return null==t?yr:(vr||(vr=document.createElementNS("http://www.w3.org/2000/svg","g")),vr.setAttribute("transform",t),(t=vr.transform.baseVal.consolidate())?wr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):yr)}),", ",")",")");function Ar(t,e){var n,r;return function(){var i=pr(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function Mr(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=pr(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function kr(t,e,n){var r=t._id;return t.each((function(){var t=pr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return dr(t,r).value[e]}}function Er(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Or(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Nr(){}var Sr=.7,Tr=1/Sr,Lr="\\s*([+-]?\\d+)\\s*",Pr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jr=/^#([0-9a-f]{3,8})$/,qr=new RegExp(`^rgb\\(${Lr},${Lr},${Lr}\\)$`),Cr=new RegExp(`^rgb\\(${Dr},${Dr},${Dr}\\)$`),Rr=new RegExp(`^rgba\\(${Lr},${Lr},${Lr},${Pr}\\)$`),$r=new RegExp(`^rgba\\(${Dr},${Dr},${Dr},${Pr}\\)$`),Vr=new RegExp(`^hsl\\(${Pr},${Dr},${Dr}\\)$`),Hr=new RegExp(`^hsla\\(${Pr},${Dr},${Dr},${Pr}\\)$`),Ir={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Br(){return this.rgb().formatHex()}function Wr(){return this.rgb().formatRgb()}function Fr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=jr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Xr(e):3===n?new Qr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ur(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ur(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=qr.exec(t))?new Qr(e[1],e[2],e[3],1):(e=Cr.exec(t))?new Qr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Rr.exec(t))?Ur(e[1],e[2],e[3],e[4]):(e=$r.exec(t))?Ur(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Vr.exec(t))?ei(e[1],e[2]/100,e[3]/100,1):(e=Hr.exec(t))?ei(e[1],e[2]/100,e[3]/100,e[4]):Ir.hasOwnProperty(t)?Xr(Ir[t]):"transparent"===t?new Qr(NaN,NaN,NaN,0):null}function Xr(t){return new Qr(t>>16&255,t>>8&255,255&t,1)}function Ur(t,e,n,r){return r<=0&&(t=e=n=NaN),new Qr(t,e,n,r)}function zr(t){return t instanceof Nr||(t=Fr(t)),t?new Qr((t=t.rgb()).r,t.g,t.b,t.opacity):new Qr}function Yr(t,e,n,r){return 1===arguments.length?zr(t):new Qr(t,e,n,null==r?1:r)}function Qr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Gr(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}`}function Jr(){const t=Kr(this.opacity);return`${1===t?"rgb(":"rgba("}${Zr(this.r)}, ${Zr(this.g)}, ${Zr(this.b)}${1===t?")":`, ${t})`}`}function Kr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ti(t){return((t=Zr(t))<16?"0":"")+t.toString(16)}function ei(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ri(t,e,n,r)}function ni(t){if(t instanceof ri)return new ri(t.h,t.s,t.l,t.opacity);if(t instanceof Nr||(t=Fr(t)),!t)return new ri;if(t instanceof ri)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new ri(a,s,u,t.opacity)}function ri(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ii(t){return(t=(t||0)%360)<0?t+360:t}function oi(t){return Math.max(0,Math.min(1,t||0))}function ai(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function si(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Er(Nr,Fr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Br,formatHex:Br,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ni(this).formatHsl()},formatRgb:Wr,toString:Wr}),Er(Qr,Yr,Or(Nr,{brighter(t){return t=null==t?Tr:Math.pow(Tr,t),new Qr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Sr:Math.pow(Sr,t),new Qr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qr(Zr(this.r),Zr(this.g),Zr(this.b),Kr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gr,formatHex:Gr,formatHex8:function(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}${ti(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Jr,toString:Jr})),Er(ri,(function(t,e,n,r){return 1===arguments.length?ni(t):new ri(t,e,n,null==r?1:r)}),Or(Nr,{brighter(t){return t=null==t?Tr:Math.pow(Tr,t),new ri(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Sr:Math.pow(Sr,t),new ri(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Qr(ai(t>=240?t-240:t+120,i,r),ai(t,i,r),ai(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ri(ii(this.h),oi(this.s),oi(this.l),Kr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Kr(this.opacity);return`${1===t?"hsl(":"hsla("}${ii(this.h)}, ${100*oi(this.s)}%, ${100*oi(this.l)}%${1===t?")":`, ${t})`}`}}));const ui=t=>()=>t;function ci(t,e){return function(n){return t+n*e}}function li(t,e){var n=e-t;return n?ci(t,n):ui(isNaN(t)?e:t)}const fi=function t(e){var n=function(t){return 1==(t=+t)?li:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):ui(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Yr(t)).r,(e=Yr(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=li(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function hi(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Yr(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}hi((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return si((n-r/e)*e,a,i,o,s)}})),hi((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return si((n-r/e)*e,i,o,a,s)}}));var pi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,di=new RegExp(pi.source,"g");function mi(t,e){var n,r,i,o=pi.lastIndex=di.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=pi.exec(t))&&(r=di.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:mr(n,r)})),o=di.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function vi(t,e){var n;return("number"==typeof e?mr:e instanceof Fr?fi:(n=Fr(e))?(e=n,fi):mi)(t,e)}function gi(t){return function(){this.removeAttribute(t)}}function yi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wi(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function bi(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function xi(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function _i(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function Ai(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Mi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function ki(t,e){return function(){hr(this,t).delay=+e.apply(this,arguments)}}function Ei(t,e){return e=+e,function(){hr(this,t).delay=e}}function Oi(t,e){return function(){pr(this,t).duration=+e.apply(this,arguments)}}function Ni(t,e){return e=+e,function(){pr(this,t).duration=e}}var Si=Tn.prototype.constructor;function Ti(t){return function(){this.style.removeProperty(t)}}var Li=0;function Pi(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Di(){return++Li}var ji=Tn.prototype;Pi.prototype=function(t){return Tn().transition(t)}.prototype={constructor:Pi,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=we(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],l=c.length,f=o[a]=new Array(l),h=0;h<l;++h)(s=c[h])&&(u=t.call(s,s.__data__,h,c))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,fr(f[h],e,n,h,f,dr(s,n)));return new Pi(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=xe(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],l=c.length,f=0;f<l;++f)if(u=c[f]){for(var h,p=t.call(u,u.__data__,f,c),d=dr(u,n),m=0,v=p.length;m<v;++m)(h=p[m])&&fr(h,e,n,m,p,d);o.push(p),a.push(u)}return new Pi(o,a,e,n)},selectChild:ji.selectChild,selectChildren:ji.selectChildren,filter:function(t){"function"!=typeof t&&(t=_e(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Pi(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],f=c.length,h=a[s]=new Array(f),p=0;p<f;++p)(u=c[p]||l[p])&&(h[p]=u);for(;s<r;++s)a[s]=e[s];return new Pi(a,this._parents,this._name,this._id)},selection:function(){return new Si(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Di(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var l=dr(a,e);fr(a,t,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Pi(r,this._parents,t,n)},call:ji.call,nodes:ji.nodes,node:ji.node,size:ji.size,empty:ji.empty,each:ji.each,on:function(t,e){var n=this._id;return arguments.length<2?dr(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?hr:pr;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=Re(t),r="transform"===n?_r:vi;return this.attrTween(t,"function"==typeof e?(n.local?_i:xi)(n,r,kr(this,"attr."+t,e)):null==e?(n.local?yi:gi)(n):(n.local?bi:wi)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Re(t);return this.tween(n,(r.local?Ai:Mi)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?xr:vi;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Ye(this,t),a=(this.style.removeProperty(t),Ye(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,Ti(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=Ye(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Ye(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}(t,r,kr(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=pr(this,t),c=u.on,l=null==u.value[a]?o||(o=Ti(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(s,i=l),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=Ye(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(kr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=dr(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Ar:Mr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ki:Ei)(e,t)):dr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Oi:Ni)(e,t)):dr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){pr(this,t).ease=e}}(e,t)):dr(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;pr(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=pr(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:ji[Symbol.iterator]};var qi={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ci(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Tn.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>ar&&n.state<cr,n.state=lr,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)}))},Tn.prototype.transition=function(t){var e,n;t instanceof Pi?(e=t._id,t=t._name):(e=Di(),(n=qi).time=Yn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&fr(a,t,e,c,s,n||Ci(a,e));return new Pi(r,this._parents,t,e)};const{abs:Ri,max:$i,min:Vi}=Math;function Hi(t){return{type:t}}["w","e"].map(Hi),["n","s"].map(Hi),["n","w","e","s","nw","ne","sw","se"].map(Hi);const Ii=Math.PI/180,Bi=180/Math.PI,Wi=.96422,Fi=1,Xi=.82521,Ui=4/29,zi=6/29,Yi=3*zi*zi,Qi=zi*zi*zi;function Gi(t){if(t instanceof Ji)return new Ji(t.l,t.a,t.b,t.opacity);if(t instanceof ro)return io(t);t instanceof Qr||(t=zr(t));var e,n,r=eo(t.r),i=eo(t.g),o=eo(t.b),a=Ki((.2225045*r+.7168786*i+.0606169*o)/Fi);return r===i&&i===o?e=n=a:(e=Ki((.4360747*r+.3850649*i+.1430804*o)/Wi),n=Ki((.0139322*r+.0971045*i+.7141733*o)/Xi)),new Ji(116*a-16,500*(e-a),200*(a-n),t.opacity)}function Ji(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Ki(t){return t>Qi?Math.pow(t,1/3):t/Yi+Ui}function Zi(t){return t>zi?t*t*t:Yi*(t-Ui)}function to(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function eo(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function no(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof ro)return new ro(t.h,t.c,t.l,t.opacity);if(t instanceof Ji||(t=Gi(t)),0===t.a&&0===t.b)return new ro(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Bi;return new ro(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new ro(t,e,n,null==r?1:r)}function ro(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function io(t){if(isNaN(t.h))return new Ji(t.l,0,0,t.opacity);var e=t.h*Ii;return new Ji(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function oo(t){return function(e,n){var r=t((e=no(e)).h,(n=no(n)).h),i=li(e.c,n.c),o=li(e.l,n.l),a=li(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}Er(Ji,(function(t,e,n,r){return 1===arguments.length?Gi(t):new Ji(t,e,n,null==r?1:r)}),Or(Nr,{brighter(t){return new Ji(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new Ji(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Qr(to(3.1338561*(e=Wi*Zi(e))-1.6168667*(t=Fi*Zi(t))-.4906146*(n=Xi*Zi(n))),to(-.9787684*e+1.9161415*t+.033454*n),to(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Er(ro,no,Or(Nr,{brighter(t){return new ro(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new ro(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return io(this).rgb()}}));const ao=oo((function(t,e){var n=e-t;return n?ci(t,n>180||n<-180?n-360*Math.round(n/360):n):ui(isNaN(t)?e:t)}));oo(li);const so=Math.sqrt(50),uo=Math.sqrt(10),co=Math.sqrt(2);function lo(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=so?10:o>=uo?5:o>=co?2:1;let s,u,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),u=Math.round(e*c),s/c<t&&++s,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),u=Math.round(e/c),s*c<t&&++s,u*c>e&&--u),u<s&&.5<=n&&n<2?lo(t,e,2*n):[s,u,c]}function fo(t,e,n){return lo(t=+t,e=+e,n=+n)[2]}function ho(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function po(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mo(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=ho,n=(e,n)=>ho(t(e),n),r=(e,n)=>t(e)-n):(e=t===ho||t===po?t:vo,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function vo(){return 0}const go=mo(ho),yo=go.right,wo=(go.left,mo((function(t){return null===t?NaN:+t})).center,yo);function bo(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Mo(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function xo(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function _o(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Mo(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}function Ao(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Mo(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?ui(e):("number"===i?mr:"string"===i?(n=Fr(e))?(e=n,fi):mi:e instanceof Fr?fi:e instanceof Date?xo:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?bo:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?_o:mr:Ao))(t,e)}function ko(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Eo(t){return+t}var Oo=[0,1];function No(t){return t}function So(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function To(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=So(i,r),o=n(a,o)):(r=So(r,i),o=n(o,a)),function(t){return o(r(t))}}function Lo(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=So(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=wo(t,e,1,r)-1;return o[n](i[n](e))}}function Po(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Do,jo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qo(t){if(!(e=jo.exec(t)))throw new Error("invalid format: "+t);var e;return new Co({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Co(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Ro(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function $o(t){return(t=Ro(Math.abs(t)))?t[1]:NaN}function Vo(t,e){var n=Ro(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}qo.prototype=Co.prototype,Co.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Ho={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Vo(100*t,e),r:Vo,s:function(t,e){var n=Ro(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Do=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ro(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Io(t){return t}var Bo,Wo,Fo,Xo=Array.prototype.map,Uo=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function zo(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const r=e<t,[i,o,a]=r?lo(e,t,n):lo(t,e,n);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let t=0;t<s;++t)u[t]=(o-t)/-a;else for(let t=0;t<s;++t)u[t]=(o-t)*a;else if(a<0)for(let t=0;t<s;++t)u[t]=(i+t)/-a;else for(let t=0;t<s;++t)u[t]=(i+t)*a;return u}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var i,o=function(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?fo(e,t,n):fo(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}(t,e,n);switch((r=qo(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($o(e)/3)))-$o(Math.abs(t)))}(o,a))||(r.precision=i),Fo(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,$o(e)-$o(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-$o(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Wo(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,u=o[a],c=o[s],l=10;for(c<u&&(i=u,u=c,c=i,i=a,a=s,s=i);l-- >0;){if((i=fo(u,c,n))===r)return o[a]=u,o[s]=c,e(o);if(i>0)u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Yo(){var t=function(){var t,e,n,r,i,o,a=Oo,s=Oo,u=Mo,c=No;function l(){var t,e,n,u=Math.min(a.length,s.length);return c!==No&&(t=a[0],e=a[u-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=u>2?Lo:To,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return f.invert=function(n){return c(e((o||(o=r(s,a.map(t),mr)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,Eo),l()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=ko,l()},f.clamp=function(t){return arguments.length?(c=!!t||No,l()):c!==No},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}()(No,No);return t.copy=function(){return e=t,Yo().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},Po.apply(t,arguments),zo(t)}function Qo(t,e,n){this.k=t,this.x=e,this.y=n}function Go(){let t=0,e=0,n=0;return new Promise(((r,i)=>{function o(i){if(t=i-e,e=i,n++,n>10)return r(t<=10?120:60);window.requestAnimationFrame((t=>o(t)))}window.requestAnimationFrame((t=>o(t)))}))}Bo=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Io:(e=Xo.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Io:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Xo.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=qo(t)).fill,n=t.align,f=t.sign,h=t.symbol,p=t.zero,d=t.width,m=t.comma,v=t.precision,g=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Ho[y]||(void 0===v&&(v=12),g=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var w="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?o:/[%p]/.test(y)?u:"",x=Ho[y],_=/[defgprs%]/.test(y);function A(t){var i,o,u,h=w,A=b;if("c"===y)A=x(t)+A,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:x(Math.abs(t),v),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),M&&0==+t&&"+"!==f&&(M=!1),h=(M?"("===f?f:c:"-"===f||"("===f?"":f)+h,A=("s"===y?Uo[8+Do/3]:"")+A+(M&&"("===f?")":""),_)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){A=(46===u?a+t.slice(i+1):t.slice(i))+A,t=t.slice(0,i);break}}m&&!p&&(t=r(t,1/0));var k=h.length+t.length+A.length,E=k<d?new Array(d-k+1).join(e):"";switch(m&&p&&(t=r(E+t,E.length?d-A.length:1/0),E=""),n){case"<":t=h+t+A+E;break;case"=":t=h+E+t+A;break;case"^":t=E.slice(0,k=E.length>>1)+h+t+A+E.slice(k);break;default:t=E+h+t+A}return s(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),A.toString=function(){return t+""},A}return{format:f,formatPrefix:function(t,e){var n=f(((t=qo(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor($o(e)/3))),i=Math.pow(10,-r),o=Uo[8+r/3];return function(t){return n(i*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),Wo=Bo.format,Fo=Bo.formatPrefix,Qo.prototype={constructor:Qo,scale:function(t){return 1===t?this:new Qo(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Qo(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Qo(1,0,0),Qo.prototype,async function(){const e=new re(".background",413,void 0,ie),n=new re(".ground",500,{x:0,y:272},.06666666666666667),r=new re(".pipe",void 0),i=new re(".bird",{x:150,y:150}),o=new class{constructor(){this.pipe={x:670,height:150},this.pipeSpeed=.06666666666666667}getPipePosition(){return this.pipe}update(t){this.pipe.x=Math.round(this.pipe.x+-t*this.pipeSpeed),this.pipe.x<-50&&this.reset()}getReward(t){return this.isTerminalState(t)?-1e3:1}reset(){this.pipe={x:670,height:150}}isTerminalState(t){const{nextPipeDistanceX:e,nextPipeDistanceY:n,nextDistanceGround:r}=t;return r<=20||e<=20&&n<=20&&!(e<=-75)}getRandomArbitrary(t,e){return Math.random()*(e-t)+t}},a=new class{constructor(t=.95,e=.005,n=.7){this.position={x:150,y:150},this.gravity=45,this.dy=0,this.qValues={},this.discount=t,this.epsilon=e,this.learningRate=n,this.reward=0}update(t){this.dy=this.dy+t/this.gravity,this.position.y=Math.round(this.position.y+this.dy)}getAgentPosition(){return this.position}getBestAction(t){const e=this.getLegalActions(),n=Math.floor(Math.random()*e.length);let r=-1/0,i=null;for(let n in e){const e=this.getQValue(t,n);e>r&&(r=e,i=n)}return Math.random()<this.epsilon?e[n]:i}getQValue(t,e){return this.qValues[t]||(this.qValues[t]=[0,0]),this.qValues[t][e]}updateQValue(t,e,n,r){const i=this.getLegalActions(),o=Math.max(...i.map((t=>this.getQValue(n,t)))),a=this.getQValue(t,e),s=r+this.discount*o-a;this.qValues[t][e]=a+this.learningRate*s}getLegalActions(){return[0,1]}takeAction(t){1===Number(t)&&(this.dy=-3)}reset(){this.position={x:150,y:150},this.dy=0,this.reward=0}getReward(){return this.reward}updateReward(t){this.reward+=t}getQValues(){return this.qValues}},s=document.querySelector(".train-iterations"),u=document.querySelector(".progress"),c=document.querySelector(".progressValue"),l=document.querySelector(".episode"),f=await Go(),h=[],p=new Worker(new URL(t.p+t.u(118),t.b));let d,m=0,v=0,g=!0,y=0;function w(){o.reset(),a.reset(),r.setPosition({x:670,y:170}),i.setPosition({x:150,y:150})}function b(t){d=requestAnimationFrame(b),m=t-v,v=t,function(t){const s=o.getPipePosition(),u=a.getAgentPosition(),c=Math.round(s.x-u.x),l=Math.round(s.height-u.y),f=Math.round(n.position.y-u.y),p=a.getBestAction([c,l,f]);a.takeAction(p),a.update(t),o.update(t),e.update(t),n.update(t);const d=o.getPipePosition(),m=a.getAgentPosition(),v=Math.round(d.x-m.x),b=Math.round(d.height-m.y),x=Math.round(n.position.y-m.y),_={currentPipeDistanceX:c,currentPipeDistanceY:l,currentDistanceGround:f},A={nextPipeDistanceX:v,nextPipeDistanceY:b,nextDistanceGround:x},M=o.getReward(_,p,A);a.updateReward(M),g&&a.updateQValue([c,l,f],p,[v,b,x],M);o.isTerminalState(A)?(h.push({x:h.length+1,y:a.getReward()}),y++,w()):(r.setPosition({x:d.x,y:d.height}),i.setPosition({x:m.x,y:m.y}))}(m),r.render(),e.render(),n.render(),i.render(),l.innerHTML=y}document.querySelector(".train-start-btn").addEventListener("click",(()=>{w(),g=!0,document.title="[TRAINING] Flappy Bird",setTimeout((()=>{u.max=Number(s.value),u.classList.remove("hidden"),p.postMessage({type:"START_TRAINING",parameters:{iterations:Number(s.value),fps:f}})}),100)})),document.querySelector(".start-simulation").addEventListener("click",(()=>{w(),g=!1,d=requestAnimationFrame(b)})),document.querySelector(".stop-simulation").addEventListener("click",(()=>{w(),cancelAnimationFrame(d)})),document.querySelector(".show-chart").addEventListener("click",(()=>{p.postMessage({type:"EXPORT_SCORES"})})),document.querySelector(".clear-chart").addEventListener("click",(()=>{document.querySelector("svg").innerHTML=""})),document.querySelector(".epsilon").addEventListener("change",(t=>{a.epsilon=Number(t.target.value),document.querySelector(".epsilon-value").innerHTML=t.target.value})),document.querySelector(".alpha").addEventListener("change",(t=>{a.learningRate=Number(t.target.value),document.querySelector(".alpha-value").innerHTML=t.target.value})),document.querySelector(".gamma").addEventListener("change",(t=>{a.discount=Number(t.target.value),document.querySelector(".gamma-value").innerHTML=t.target.value})),s.addEventListener("change",(t=>{document.querySelector(".train-iterations-value").innerHTML=t.target.value})),ne&&(ne("#epsilon",{content:"This parameter represents the exploration vs. exploitation trade-off in the Q-value iteration algorithm. It determines the probability of the agent taking a random action instead of the action with the highest Q-value (i.e., exploration) vs. the action with the highest Q-value (i.e., exploitation). <p>A high value of ε indicates that the agent is more likely to explore, while a low value of ε indicates that the agent is more likely to exploit. Setting ε too high can cause the agent to explore too much and potentially miss the optimal policy, while setting it too low can cause the agent to exploit too much and potentially get stuck in local optima.</p>",allowHTML:!0}),ne("#alpha",{content:"This parameter represents the learning rate in the Q-value update. It determines how much weight should be given to the new Q-value estimate vs. the previous Q-value estimate. A high value of α indicates that the new Q-value estimate should be given more weight, while a low value of α indicates that the previous Q-value estimate should be given more weight. Setting α too high can cause the algorithm to converge too quickly and potentially miss the optimal policy, while setting it too low can cause the algorithm to converge too slowly.",allowHTML:!0}),ne("#gamma",{content:"This parameter determines the importance of future rewards in the Q-value update. It is a discount factor that discounts the value of future rewards based on how far away they are in time. In other words, it determines how much weight should be given to immediate rewards vs. future rewards. A high value of γ (e.g., close to 1.0) indicates that future rewards are important, while a low value of γ (e.g., close to 0.0) indicates that only immediate rewards matter.",allowHTML:!0})),p.onmessage=t=>{const{type:e,parameters:n}=t.data;if("END_TRAINING"===e&&(document.title="Flappy Bird",u.value=Number(s.value),c.innerHTML="100%",p.postMessage({type:"EXPORT_Q_VALUES"})),"Q_VALUES"===e){const{qValues:t}=n;a.qValues=t}if("SCORES"===e){const{scores:t}=n;!function(t){document.querySelector("svg").innerHTML="";const e=function(t){return new Nn([[document.querySelector(t)]],[document.documentElement])}("svg").attr("width",640).attr("height",400).append("g").attr("transform","translate(30, 30)"),n=Yo().domain([0,oe(t,(t=>t.x))]).range([0,580]),r=Yo().domain([0,oe(t,(t=>t.y))]).range([340,0]),i=Yo().domain([0,oe(t,(t=>t.y))]).range(["#0EA5E9","#EF4444"]).interpolate(ao);e.selectAll("circle").data(t).enter().append("circle").attr("cx",(t=>n(t.x))).attr("cy",(t=>r(t.y))).attr("r",1).attr("fill",(t=>i(t.y))),e.append("g").attr("transform","translate(0, 340)").call(ge(ce,n)),e.append("g").call(ge(le,r))}(t)}if("PROGRESS"===e){const{iteration:t}=n,e=`${Math.round(Number(t)/Number(s.value)*100)}%`;u.value=t,c.innerHTML=e,document.title=`[TRAINING] ${e}`}}}()})();